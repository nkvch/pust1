\chapter{Wzory matematyczne}
Stosujemy przecinek dziesiêtny, a~nie kropkê dziesiêtn¹. Aby unikn¹æ dodatkowego odstêpu, stosujemy zapis \verb+\num{1,2345}+ lub \verb+\num{1.2345}+, co prowadzi do \num{1,2345}, a~nie \verb+$1,2345$+, co prowadzi do $1,2345$. Stosujemy zapis \num{1.2345e10}, a~nie $1{,}2345\times 10^{10}$. Powy¿szy zapis mo¿na stosowaæ równie¿ w trybie matematycznym, np. \verb+$\num{1.2345e10}$+ skompiluje siê do $\num{1.2345e10}$.

\section{Sta³e i~zmienne, indeksowanie}
Skalarne sta³e i~zmienne zapisujemy w~trybie matematycznym, np. $x$, $y$, $z$. Stosujemy indeksy dolne, np. $x_i$, górne, np. $x^j$, lub oba, np. $x_i^j$. Mo¿na równie¿ zastosowaæ indeksy w~nawiasach, np. $y(k)$. Je¿eli indeks zapisany jest czcionk¹ pochy³¹, spodziewamy siê, ¿e przyjmuje on wartoœæ liczbow¹ (liczby naturalne), np. $x_i$ dla $i=1,\ldots,10$. Je¿eli natomiast zastosujemy oznaczenie $x_{\mathrm{i}}$, to wówczas indeks $\mathrm{i}$ nie przyjmuje ¿adnej wartoœci, jest on integraln¹ czêœci¹ zmiennej lub sta³ej. Dlatego oznaczaj¹c horyzont sterowania stosujemy symbol $N_{\mathrm{u}}$, a~nie $N_u$, co by sugerowa³o, ¿e indeks $u$ przyjmuje pewne wartoœci z zakresu liczb naturalnych. Analogicznie, sta³a czasowa ca³kowania oznaczana jest jako $T_{\mathrm{i}}$, a~nie jako $T_i$, sta³a czasowa ró¿niczkowania to $T_{\mathrm{d}}$, a nie $T_d$. Sygna³ wartoœci zadanej oznaczamy przez $y^{\mathrm{zad}}$, a~nie przez $y^{zad}$.

Nie nale¿y stosowaæ czcionki pochy³ej równie¿ do tekstów, które uzupe³niaj¹ wyra¿enia matematyczne, np. zamiast b³êdnej postaci
\begin{equation}
y(x)=
\begin{cases}
x^2 & gdy \ x\le 0\\
x^3 & gdy \ x>0
\end{cases}
\nonumber
\end{equation}
powinno byæ
\begin{equation}
y(x)=
\begin{cases}
x^2 & \textrm{gdy } x\le 0\\
x^3 & \textrm{gdy } x>0
\end{cases}
\nonumber
\end{equation}
Odstêpy w trybie matematycznym wymuszamy za pomoc¹ instrukcji \verb+\+, \verb+\quad+, \verb+\qquad+ itd.

\section{Wektory}
Do oznaczenia wektorów najczêœciej stosujemy symbole pogrubione, np. $\boldsymbol{x}$, $\triangle\boldsymbol{u}(k)$. Pamiêtamy, ¿e w matematyce wektory zawsze s¹ pionowe. Wektory, których elementami s¹ skalary, zapisujemy wiêc jako
\begin{equation}
\triangle\boldsymbol{u}(k)=\left[\triangle u(k|k) \ \ldots \ \triangle u(k+N_{\mathrm{u}}-1|k) \right]^{\mathrm{T}}
\end{equation}
lub w~postaci
\begin{equation}
\triangle\boldsymbol{u}(k)=\left[
\begin{array}{c}
\triangle u(k|k)\\
\vdots\\
\triangle u(k+N_{\mathrm{u}}-1|k)
\end{array}
\right]
\label{w_dUk}
\end{equation}
Je¿eli u¿ywamy wektorów, których elementami sk³adowymi s¹ inne wektory, najwygodniej zapisaæ je pionowo. Np. elementami wektora (\ref{w_dUk}) s¹ podwektory
\begin{equation}
\triangle u(k+p|k)=\left[
\begin{array}{c}
\triangle u_1(k+p|k)\\
\vdots\\
\triangle u_{n_{\mathrm{u}}}(k+p|k)
\end{array}
\right]
\label{w_dukp}
\end{equation}
gdzie $p=1,\ldots,N_{\mathrm{u}}$. A wiêc ka¿dy z~wektorów (\ref{w_dukp}) ma d³ugoœæ $n_{\mathrm{u}}$, wektor (\ref{w_dUk}) ma d³ugoœæ $n_{\mathrm{u}}N_{\mathrm{u}}$.

\section{Macierze}
Do oznaczenia macierzy najczêœciej stosujemy symbole pogrubione, np. macierz dynamiczna w~algorytmie DMC dla procesu o~jednym wejœciu i~jednym wyjœciu ma wymiar $N \times N_{\mathrm{u}}$ i strukturê
\begin{equation}
\boldsymbol{G}=\left[
\begin{array}
{cccc}
s_{1} & 0 & \ldots & 0\\
s_{2} & s_{1} & \ldots & 0\\
\vdots & \vdots & \ddots & \vdots\\
s_{N} & s_{N-1} & \ldots &  s_{N-N_{\mathrm{u}}+1}
\end{array}
\right]
\end{equation}
W~przypadku procesu o~$n_{\mathrm{u}}$ wejœciach i~$n_{\mathrm{y}}$ wyjœciach ma ona  wymiar $N\times N_{\mathrm{u}}$ i postaæ
\begin{equation}
\boldsymbol{G}=\left[
\begin{array}
{cccc}
\boldsymbol{S}_{1} & \boldsymbol{0}_{n_{\mathrm{y}}\times n_{\mathrm{u}}} & \ldots & \boldsymbol{0}_{n_{\mathrm{y}}\times n_{\mathrm{u}}}\\
\boldsymbol{S}_{2} & \boldsymbol{S}_{1} & \ldots & \boldsymbol{0}_{n_{\mathrm{y}}\times n_{\mathrm{u}}}\\
\vdots & \vdots & \ddots & \vdots\\
\boldsymbol{S}_{N} & \boldsymbol{S}_{N-1} & \ldots &  \boldsymbol{S}_{N-N_{\mathrm{u}}+1}%
\end{array}
\right]
\label{w_G}
\end{equation}
gdzie ka¿da z~macierzy sk³adowych ma wymiar $n_{\mathrm{y}}\times n_{\mathrm{u}}$
\begin{equation}
\boldsymbol{S}_p=\left[
\begin{array}
{ccc}
s_p^{1,1} & \ldots & s_p^{1,n_{\mathrm{u}}}\\
\vdots & \ddots & \vdots\\
s_p^{n_{\mathrm{y}},1} & \ldots & s_p^{n_{\mathrm{y}},n_{\mathrm{u}}}
\end{array}
\right]
\end{equation}
gdzie $p=1,\ldots,N$. A~wiêc macierz (\ref{w_G}) ma wymiar $n_{\mathrm{y}}N\times n_{\mathrm{u}}N_{\mathrm{u}}$.

\section{Wiêksze wyra¿enia matematyczne}
W~przypadku d³ugich wzorów nie nale¿y korzystaæ z~otoczenia \verb+equation+, poniewa¿ wzór taki zwykle nie~mieœci siê na stronie o przyjêtej szerokoœci, np.
\begin{equation}
y(k)=b_1u(k-1)+b_2u(k-2)+b_3u(k-3)+b_4u(k-4)+b_5u(k-5)-a_1y(k-1)-a_2y(k-2)-a_3y(k-3)-a_4y(k-4)-a_5y(k-5)
\end{equation}
Nale¿y zastosowaæ otoczenie \verb+align+, co prowadzi do wzoru
\begin{align}
y(k)&=b_1u(k-1)+b_2u(k-2)+b_3u(k-3)+b_4u(k-4)+b_5u(k-5)\nonumber\\
&\quad -a_1y(k-1)-a_2y(k-2)-a_3y(k-3)-a_4y(k-4)-a_5y(k-5)\label{w_yk}
\end{align}
Nie stosujemy otoczenia \verb+split+ z~powodu b³êdnego centrowania. Numer wzoru z³o¿onego z~wielu wierszy umieszczamy tylko w~ostatnim wierszu.




