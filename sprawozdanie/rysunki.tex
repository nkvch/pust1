\chapter{Rysunki}
Wszystkie elementy dokumentu opracowanego w~systemie \LaTeX\ powinny wygl¹daæ jednolicie. Do wykonywania rysunków korzystamy wiêc z mechanizmów oferowanych przez dodatkowe pakiety \LaTeX a, nie do³¹czamy rysunków wykonanych jakoœciowo ró¿nych, np. wykonanych w~programie Word. Nie u¿ywamy rysunków zapisanych w~plikach bitmapowych, lecz w~plikach wektorowych (\verb+pdf+, ew. \verb+ps+ lub \verb+eps+). Jedynym wyj¹tkiem s¹ zdjêcia.

\section{Schematy blokowe}
Do opracowania schematów blokowych najlepiej wykorzystaæ jêzyk opisu rysunków \verb+TikZ/PGF+ \cite{litTantau2015}. Przy wykonywaniu prostych rysunków po prostu opisujemy je za pomoc¹ poleceñ dodaj¹cych kolejne elementy, tzn. prostok¹ty, okrêgi, linie. Na przyk³ad, ci¹g poleceñ:
\begin{lstlisting}[style=customlatex,frame=single] 
\begin{figure}[b]
\centering
\begin{tikzpicture}
\draw [red, thick] (0,0) rectangle (4,3);
\draw [orange, thick,dashed] (1,1) rectangle (3,2);
\draw [->,thick] (4,1.5) -- (7,1.5);
\draw [blue, thick] (8,1.5) circle [radius=1];
\node at (2,1.5) {Tekst};
\node at (8,1.5) {$y(x)=x^2$};
\end{tikzpicture}
\end{figure}
\end{lstlisting}
pozwala narysowaæ figury geometryczne przedstawione na rys. \ref{r_tikz_przyklad}. Zwróæmy uwagê, ¿e napis oraz wzór s¹ z³o¿one aktualnie wykorzystywan¹ czcionk¹, jej wielkoœæ jest taka sama jak w~ca³ym dokumencie.

\begin{figure}[b]
\centering
\begin{tikzpicture}
\draw [red, thick] (0,0) rectangle (4,3);
\draw [orange, thick,dashed] (1,1) rectangle (3,2);
\draw [->,thick] (4,1.5) -- (7,1.5);
\draw [blue, thick] (8,1.5) circle [radius=1];;
\node at (2,1.5) {Tekst};
\node at (8,1.5) {$y(x)=x^2$};
\end{tikzpicture}

\caption{Przyk³adowy rysunek wykonany w~jêzyku \texttt{TikZ/PGF}}
\label{r_tikz_przyklad}
\end{figure}

Przy wiêkszych rysunkach mo¿na wykorzystaæ programy umo¿liwiaj¹ce ich przygotowanie przy wykorzystaniu œrodowiska graficznego, np. \verb+TikzEdt+ (\url{http://www.tikzedt.org/}), \verb+TpX+ (\url{http://tpx.sourceforge.net/}), \verb+ktikz+ (\url{https://www.linux-apps.com/p/1126914/}), \verb+GraTeX+ (\url{https://sourceforge.net/projects/gratex/}).

Mo¿na równie¿ wykorzystaæ starsze, klasyczne pakiety \verb+picture+, \verb+epic+, \verb+eepic+. Równie¿ w~tych przypadkach mo¿na ,,rêcznie'' opisywaæ poszczególne elementy graficzne lub skorzystaæ ze œrodowiska graficznego, np. \verb+LaTeXPiX+ (\url{http://latexpix.software.informer.com/}), które znacznie przyspiesza pracê. Inne narzêdzia, umo¿liwiaj¹ce opracowanie rysunków wysokiej jakoœci, to \verb+METAPOST+ oraz \verb+PSTricks+.

\section{Kolory}
Przy umieszczaniu kilku wykresów na tym samym rysunku, np. wyników eksperymentów dla ró¿nych wartoœci parametrów, nale¿y zastosowaæ kolory ró¿ni¹ce siê od siebie w~znacznym stopniu, nie mo¿na stosowaæ kolorów podobnych, np. kilku odcieni tego samego koloru. Warto zastosowaæ standardow¹ paletê kolorów o~nazwie \texttt{lines}, u¿yt¹ w~pakiecie MATLAB, która zosta³a przedstawiona w~tab.~\ref{r_zestaw_kolorow}. Definicja tych kolorów w~systemie \LaTeX\ jest nastêpuj¹ca:
\begin{lstlisting}[style=customlatex,frame=single]
\definecolor{niebieski}{rgb}{0,0.447,0.741}
\definecolor{czerwony}{rgb}{0.85,0.325,0.098}	
\definecolor{zolty}{rgb}{0.929,0.694,0.125}		
\definecolor{fioletowy}{rgb}{0.494,0.184,0.556}	
\definecolor{zielony}{rgb}{0.466,0.674,0.188}
\definecolor{jasnoniebieski}{rgb}{0.301,0.745,0.933}
\definecolor{ciemnioczerwony}{rgb}{0.635,0.078,0.184}
\end{lstlisting}

\definecolor{niebieski}{rgb}{0,0.447,0.741}
\definecolor{czerwony}{rgb}{0.85,0.325,0.098}	
\definecolor{zolty}{rgb}{0.929,0.694,0.125}		
\definecolor{fioletowy}{rgb}{0.494,0.184,0.556}	
\definecolor{zielony}{rgb}{0.466,0.674,0.188}
\definecolor{jasnoniebieski}{rgb}{0.301,0.745,0.933}
\definecolor{ciemnioczerwony}{rgb}{0.635,0.078,0.184}

\begin{table}[h]
\caption{Paleta 7 kolorów}
\label{r_zestaw_kolorow}
	\centering
	\begin{small}
		\begin{tabular}{|p{3cm}|p{4cm}|}
			\hline
			%\multicolumn{1}{|c|}{Nazwa koloru\rule{0pt}{3.5mm}} & \multicolumn{1}{|c|}{} \\ \hline
			niebieski & \cellcolor{niebieski}\\
			czerwony & \cellcolor{czerwony}\\
			zolty & \cellcolor{zolty}\\
			fioletowy & \cellcolor{fioletowy}\\
			zielony & \cellcolor{zielony}\\
			jasnoniebieski & \cellcolor{jasnoniebieski}\\
			ciemnioczerwony & \cellcolor{ciemnioczerwony}\\
			\hline
		\end{tabular}
	\end{small}
\end{table}

\section{Funkcje statyczne}
Do wykonywania wykresów prezentuj¹cych wyniki symulacji i~eksperymentów stosuje siê pakiet \verb+PGFPLOTS+ \cite{litFeuersanger2016}. Za³ó¿my, ¿e w~katalogu \verb+rysunki/dane_stat+ znajduje siê plik \verb+dane_fx.txt+ zawieraj¹cy w~pierwszej kolumnie wartoœci argumentu $x$, natomiast w~drugiej kolumnie wartoœci funkcji $f(x)$:
\begin{lstlisting}[style=customlatex,frame=single]
  -10.0000 -808.7350
   -9.0000 -696.4791
   -8.0000 -539.7850
   -7.0000 -386.1268
   -6.0000 -291.5881
   -5.0000 -267.6436
   -4.0000 -268.9551
   -3.0000 -233.3995
   -2.0000 -137.5303
   -1.0000  -16.4788
         0   70.0000
    1.0000   94.1212
    2.0000   87.2697
    3.0000  112.8005
    4.0000  209.4449
    5.0000  357.3564
    6.0000  498.0119
    7.0000  589.6732
    8.0000  647.4150
    9.0000  730.9209
   10.0000  891.2650
\end{lstlisting}
oraz podobny plik \verb+dane_gx.txt+, definiuj¹cy funkcjê $g(x)$. Aby narysowaæ te funkcje stosuje siê polecenia:
\begin{lstlisting}[style=customlatex,frame=single]
\newcommand{\szer}{8cm}
\newcommand{\wys}{7cm}

\begin{figure}[t]
\centering
\begin{tikzpicture}
\begin{axis}[
	width=\szer,
	height=\wys,
	xmin=-10,xmax=10,ymin=-1000,ymax=1000,
	xlabel={$x$},
	ylabel={$f(x), \ g(x)$},
	xtick={-10,-5,0,5,10},
	ytick={-1000,-500,0,500,1000},
	legend pos=south east,
]

\definecolor{niebieski}{rgb}{0,0.447,0.741}
\definecolor{czerwony}{rgb}{0.85,0.325,0.098}	

\addplot[niebieski,thick]
	file {rysunki/dane_stat/dane_fx.txt};
\addplot[czerwony,thick,densely dashed]
	file {rysunki/dane_stat/dane_gx.txt};
\legend{$f(x)$,$g(x)$}
\end{axis}
\end{tikzpicture}
\caption{Przyk³adowy rysunek funkcji $f(x)$ i~$g(x)$ wykonany 
w~jêzyku \texttt{PGFPLOTS}}
\label{r_pgfplots_funkcje}
\end{figure}
\end{lstlisting}
Otrzymany rezultat przedstawiono na rys.~\ref{r_pgfplots_funkcje}.

Dla wykorzystanej palety kolorów ³adnie wygl¹daj¹ rysunki o~pogrubionych liniach (styl \verb+thick+).

Istnieje mo¿liwoœæ ustawienia wielkoœci czcionek liczb umieszczonych: na osiach (\verb+tick label style+), w~oznaczeniach osi (\verb+label style+), w~legendzie (\verb+legend style+) oraz w~tytule rysunku (\verb+title style+). Przyk³adowa konfiguracja zmieniaj¹ca wielkoœæ czcionek jest nastêpuj¹ca:
\begin{lstlisting}[style=customlatex,frame=single]
\pgfplotsset{
	tick label style={font=\tiny},
	label style={font=\footnotesize},
	legend style={font=\footnotesize},
	title style={font=\footnotesize},
	/pgf/number format/.cd, use comma, 1000 sep={}
}
\end{lstlisting}
Dodatkowo, sekwencja \verb+/pgf/number format/.cd, use comma, 1000 sep={}+ ustawia przecinek jako separator dziesiêtny (zamiast domyœlnej kropki) oraz kasuje separator, oddzielaj¹cy tysi¹ce od setek (domyœlenie jest to przecinek).

\newcommand{\szer}{8cm}
\newcommand{\wys}{7cm}

\begin{figure}[tb]
\centering
\begin{tikzpicture}
\begin{axis}[
	width=\szer,
	height=\wys,
	xmin=-10,xmax=10,ymin=-1000,ymax=1000,
	xlabel={$x$},
	ylabel={$f(x), \ g(x)$},
	xtick={-10,-5,0,5,10},
	ytick={-1000,-500,0,500,1000},
	legend pos=south east,
]

\definecolor{niebieski}{rgb}{0,0.447,0.741}
\definecolor{czerwony}{rgb}{0.85,0.325,0.098}	

\addplot[niebieski,thick]
	file {rysunki/dane_stat/dane_fx.txt};
\addplot[czerwony,thick,densely dashed]
	file {rysunki/dane_stat/dane_gx.txt};
\legend{$f(x)$,$g(x)$}
\end{axis}
\end{tikzpicture}
\caption{Przyk³adowy rysunek funkcji $f(x)$ i~$g(x)$ wykonany w~jêzyku \texttt{PGFPLOTS} (rysunek jest generowany przy ka¿dym przetworzenia pliku Ÿród³owego}
\label{r_pgfplots_funkcje}
\end{figure}

Opisany sposób implementacji rysunków jest poprawny, ale ma powa¿n¹ wadê, poniewa¿ \LaTeX{}   potrzebuje doœæ du¿o czasu na ich przetworzenie. Okazuje siê to du¿ym mankamentem szczególnie wówczas, gdy w~dokumencie znajduje siê du¿o skomplikowanych rysunków. Skutecznym rozwi¹zaniem jest przygotowanie rysunków i~zapis ich do plików \verb+pdf+, a~nastêpnie do³¹czenie ich do g³ównego dokumentu poleceniem \verb+\includegraphics+. W~katalogu \verb+rysunki/zapisz_pdf+ podano kilka przyk³adów takich rysunków. Plik Ÿród³owy \verb+funkcje.tex+ ma postaæ:
\lstinputlisting[style=customlatex,frame=single]{rysunki/zapisz_pdf/funkcje.tex}
Zwróæmy uwagê, ¿e dziêki zastosowaniu klasy \verb+standalone+, wygenerowany zostanie rysunek o~zadanych wymiarach (bez niepotrzebych marginesów), plik \verb+pdf+ nie bêdzie formatu A4. Nastêpuj¹ce polecenie 
\begin{lstlisting}[style=customlatex,frame=single]
pdflatex funkcje.tex
\end{lstlisting}
zapisuje plik \verb+funkcje.pdf+. Wygenerowany rysunek do³¹cza siê do dokumentu ci¹giem instrukcji:
\begin{lstlisting}[style=customlatex,frame=single]
\begin{figure}[tb]
\centering
\includegraphics[scale=1]{pgfplots_pdf/funkcje}
\caption{Przyk³adowy rysunek funkcji $f(x)$ i~$g(x)$ wykonany
w~jêzyku \texttt{PGFPLOTS}}
\label{r_pgfplots_funkcje}
\end{figure}
\end{lstlisting}
Otrzymany rezultat przedstawiono na rys.~\ref{r_pgfplots_funkcje_pdf}. Oczywiœcie, rysunki \ref{r_pgfplots_funkcje} i~\ref{r_pgfplots_funkcje_pdf} s¹ bardzo podobne, inna jest tylko wielkoœæ czcionek na osiach.

Przy du¿ych zbiorach danych \LaTeX{} zg³asza b³¹d pamiêci. Nale¿y wówczas zastosowaæ system sk³adu \hbox{Lua\LaTeX}.

Nie nale¿y skalowaæ rysunku przy wykorzystaniu argumentów polecenia \verb+\includegraphics+, gdy¿ zmieni to wielkoœæ zastosowanej czcionki. Je¿eli zachodzi koniecznoœæ zmiany wielkoœci rysunku, nale¿y zmodyfikowaæ plik Ÿród³owy generuj¹cy rysunek.

Je¿eli rysunek jest znacznie szerszy ni¿ szerokoœæ strony (oraz gdy nie mo¿emy lub nie chcemy redukowaæ szerokoœci rysunku), nale¿y zastosowaæ otoczenie \verb+sidewaysfigure+ z~pakietu \verb+rotating+, które dzia³a analogicznie jak otoczenie \verb+sidewaystable+.

W~dokumentacji pakietu \verb+PGFPLOTS+ omówiono sposób przygotowania rysunków trójwymiarowych \cite{litFeuersanger2016}.

\begin{figure}[ptb]
\centering
\includegraphics[scale=1]{rysunki/zapisz_pdf/funkcje}
\caption{Przyk³adowy rysunek funkcji $f(x)$ i~$g(x)$ wykonany
w~jêzyku \texttt{PGFPLOTS} i~zapisany w~pliku \texttt{funkcje.pdf}}
\label{r_pgfplots_funkcje_pdf}
\end{figure}

\section{Wyniki symulacji i~eksperymentów}
\subsection{Procesy jednowymiarowe}
Za³ó¿my, ¿e w~katalogu \verb+rysunki/symulacje11+ znajduje siê plik \verb+yzad.txt+ zawieraj¹cy w~pierwszej kolumnie pomiary czasu $t$ (w~sekundach), natomiast w~drugiej kolumnie próbki sygna³u wartoœci zadanej $y^{\mathrm{zad}}$. Wykonano symulacje algorytmu regulacji GPC przy piêciu ró¿nych wartoœciach parametru $\lambda$: $\num{0,1}$, $\num{0,2}$, $\num{0,5}$, $\num{1}$ i~$\num{2}$. Przebiegi sygna³u steruj¹cego $u$ zapisano w~plikach \verb+u_lambda_0_1.txt+, \verb+u_lambda_0_2.txt+, \verb+u_lambda_0_5.txt+, \verb+u_lambda_1.txt+ i~\verb+u_lambda_2.txt+, natomiast przebiegi sygna³u wyjœciowego procesu $y$ zapisano w~plikach \verb+y_lambda_0_1.txt+, \verb+y_lambda_0_2.txt+, \verb+y_lambda_0_5.txt+, \verb+y_lambda_1.txt+ i~\verb+y_lambda_2.txt+. Przygotowano plik \verb+symulacje11.tex+, umo¿liwiaj¹cy zapisanie rysunku do pliku \verb+symulacje11.pdf+. Znajduje siê on w~katalogu \verb+rysunki/zapisz_pdf+ i~ma nastêpuj¹c¹ postaæ:
\lstinputlisting[style=customlatex,frame=single]{rysunki/zapisz_pdf/symulacje11.tex}
Na pocz¹tku powy¿szego pliku zostaje wczytany i~skonfigurowany pakiet \verb+siunitx+. Miêdzy innymi, ustawiamy przecinek jako separator dziesiêtny. Liczby z~czêœci¹ u³amkow¹ zapisujemy w~postaci \verb+\num{0.1}+. W~zale¿noœci od konfiguracji, otrzymamy $0.1$ lub $0{,}1$. Polecenie
\begin{lstlisting}[style=customlatex,frame=single]
pdflatex symulacje11.tex
\end{lstlisting}
zapisuje plik \verb+symulacje11.pdf+. Rezultat przedstawiono na rys.~\ref{r_pgfplots_symulacje11_pdf}. Rysunek do³¹cza siê do dokumentu instrukcj¹ \verb+\includegraphics+. Zwróæmy uwagê, ¿e do narysowania wyników symulacji dla kolejnych wartoœci parametru $\lambda$ zastosowano ró¿ne kolory oraz ró¿ne style linii (linia ci¹g³a, linia przerywana, itd.). Umo¿liwia to ³atwe rozró¿nienie dokumentów na czarno-bia³ym wydruku. Przy wydruku kolorowym oraz dokumentach elektronicznych mo¿na zrezygnowaæ ze stosowania ró¿nych stylów linii, do ich rozró¿nienia wystarczaj¹ce s¹ kolory, pod warunkiem jednak, ¿e kolejne krzywe nie s¹ po³o¿one bardzo blisko siebie.

Czasami, ze wzglêdu na ograniczon¹ objêtoœæ dokumentu, nale¿y zmniejszyæ rysunki. Aby zmniejszyæ objêtoœæ mo¿na zastosowaæ u³o¿enie poziome dwóch rysunków, prezentuj¹cych wyniki symulacji procesu. Przygotowano plik \verb+symulacje11_wersja2.tex+, umo¿liwiaj¹cy zapisanie rysunku do pliku \verb+symulacje11_wersja2.pdf+. Znajduje siê on w~katalogu \verb+rysunki/zapisz_pdf+ i~ma nastêpuj¹c¹ postaæ:
\lstinputlisting[style=customlatex,frame=single]{rysunki/zapisz_pdf/symulacje11_wersja2.tex}
Rezultat przedstawiono na rys.~\ref{r_pgfplots_symulacje11_wersja2_pdf}.

\begin{figure}[H]
\centering
\includegraphics[scale=1]{rysunki/zapisz_pdf/symulacje11}
%\includegraphics[scale=1]{rysunki/zapisz_pdf/symulacje11}
\caption{Przyk³adowy rysunek wyników symulacji procesu jednowymiarowego wykonany
w~jêzyku \texttt{PGFPLOTS} i~zapisany w~pliku \texttt{symulacje11.pdf}}
\label{r_pgfplots_symulacje11_pdf}
\end{figure}

\begin{figure}[H]
\centering
\includegraphics[scale=1]{rysunki/zapisz_pdf/symulacje11_wersja2}
\caption{Przyk³adowy rysunek wyników symulacji procesu jednowymiarowego wykonany
w~jêzyku \texttt{PGFPLOTS} i~zapisany w~pliku \texttt{symulacje11\_wersja2.pdf}}
\label{r_pgfplots_symulacje11_wersja2_pdf}
\end{figure}

\subsection{Procesy wielowymiarowe}
Za³ó¿my, ¿e w~katalogu \verb+rysunki/symulacje22+ znajduj¹ siê wyniki symulacji procesu o~dwóch wejœciach i~dwóch wyjœciach zapisane w~plikach: \verb+yzad1.txt+, \verb+yzad2.txt+, \verb+u1.txt+, \verb+u2.txt+, \verb+y1.txt+, \verb+y2.txt+. W~pierwszej kolumnie tych plików podano czas $t$ (w~sekundach), natomiast w~drugiej kolumnie wartoœæ odpowiedniej zmiennej. Plik \verb+symulacje22.tex+, umo¿liwiaj¹cy zapisanie rysunku do pliku \verb+symulacje22.pdf+ znajduje siê w~katalogu \verb+rysunki/zapisz_pdf+ i~ma nastêpuj¹c¹ postaæ:
\lstinputlisting[style=customlatex,frame=single]{rysunki/zapisz_pdf/symulacje22.tex}
Rezultat przedstawiono na rys.~\ref{r_pgfplots_symulacje22_pdf}.

Aby zmniejszyæ objêtoœæ mo¿na nieco inaczej u³o¿yæ 4 rysunki, prezentuj¹ce wyniki symulacji procesu dwuwymiarowego. Przygotowano plik \verb+symulacje22_wersja2.tex+, umo¿liwiaj¹cy zapisanie rysunku do pliku \verb+symulacje22_wersja2.pdf+. Znajduje siê on w~katalogu \verb+rysunki/zapisz_pdf+ i~ma nastêpuj¹c¹ postaæ:
\lstinputlisting[style=customlatex,frame=single]{rysunki/zapisz_pdf/symulacje22_wersja2.tex}
Rezultat przedstawiono na rys.~\ref{r_pgfplots_symulacje22_wersja2_pdf}.

\begin{figure}[H]
\centering
\includegraphics[scale=1]{rysunki/zapisz_pdf/symulacje22}
\caption{Przyk³adowy rysunek wyników symulacji procesu dwuwymiarowego wykonany
w~jêzyku \texttt{PGFPLOTS} i~zapisany w~pliku \texttt{symulacje22.pdf}}
\label{r_pgfplots_symulacje22_pdf}
\end{figure}

\begin{figure}[H]
\centering
\includegraphics[scale=1]{rysunki/zapisz_pdf/symulacje22_wersja2}
\caption{Przyk³adowy rysunek wyników symulacji procesu dwuwymiarowego wykonany
w~jêzyku \texttt{PGFPLOTS} i~zapisany w~pliku \texttt{symulacje22\_wersja2.pdf}}
\label{r_pgfplots_symulacje22_wersja2_pdf}
\end{figure}

\section{Zapis wielu rysunków do jednego pliku \texttt{pdf}}
Aktywacja klasy \verb+standalone+ z~opcj¹ \verb+tikz+ umo¿liwia zapis wielu rysunków do jednego pliku \texttt{pdf}. Rozwa¿my przyk³adowy plik \verb+funkcje2.tex+ z~katalogu \verb+rysunki/zapisz_pdf+:
\lstinputlisting[style=customlatex,frame=single]{rysunki/zapisz_pdf/funkcje2.tex}
Ka¿dy rysunek wygenerowany przez otoczenie \verb+tikzpicture+ znajdzie siê na osobnej stronie. Co wa¿ne, je¿eli ka¿dy rysunek bêdzie mia³ inne wymiary, dziêki klasie \verb+standalone+ ka¿da strona jest przycinana do zawartoœci. Gotowe rysunki wstawiamy do dokumentu poleceniami (oczywiœcie w~otoczeniu \verb+figure+):
\begin{lstlisting}[style=customlatex,frame=single]
\includegraphics[page=1]{funkcje2.pdf}
\end{lstlisting}
oraz
\begin{lstlisting}[style=customlatex,frame=single]
\includegraphics[page=2]{funkcje2.pdf}
\end{lstlisting}
Opisany sposób zapisu rysunków pozwala na ograniczenie liczby plików oraz umo¿liwia grupowanie treœci.

\section{Prosty eksport wykresów: skrypt \texttt{matlab2tikz}}
Oprócz opisanego sposobu przygotowywania rysunków z~wykorzystaniem pakietu \verb+PGFPLOTS+, mo¿na wykorzystaæ skrypt \texttt{matlab2tikz}, który generuje kod Ÿród³owy (\verb+TikZ+) rysunku wykonanego w~programie MATLAB. Skrypt \texttt{matlab2tikz} dostêpny jest pod adresem: \url{https://www.mathworks.com/matlabcentral/fileexchange/22022-matlab2tikz-matlab2tikz}. Rozwa¿my przyk³adowy plik \verb+wykresy_z_matlaba.m+ z~katalogu \verb+rysunki/matlab2tikz+:
\lstinputlisting[style=Matlab-editor]{./rysunki/matlab2tikz/wykresy_z_matlaba.m}
Wykres wstawiamy do dokumentu w~nstêpuj¹cy sposób:
\begin{lstlisting}[style=customlatex,frame=single]
\begin{figure}[H]
\centering
	\input{./rysunki/matlab2tikz/wykres_tex.tex}
\caption{Przyk³adowy rysunek wykonany w~MATLABie 
i~wygenerowany skryptem \texttt{matlab2tikz}}
\label{r_matlab2tikz}
\end{figure}
\end{lstlisting}
Otrzymany rezultat przedstawiono na rys. \ref{r_matlab2tikz}. Oczywiœcie, czasami konieczna jest ingerencja i~drobna modyfikacja plików wygenerowanych przez skrypt \texttt{matlab2tikz}, np. w~celu zmiany wielkoœci czcionki lub ca³ego rysunku.

Rysunek jest generowany na podstawie kodu Ÿród³owego przy ka¿dym przetworzeniu dokumentu przez system \LaTeX, a~wiêc przy wiêkszej liczbie rysunków celowe jest oddzielne przygotowanie poszczególnych rysunków w~plikach \verb+pdf+, a~nastêpnie ich do³¹czenie do dokumentu przy u¿yciu polecenia \verb+\includegraphics+.

\begin{figure}[H]
\centering
	\input{./rysunki/matlab2tikz/wykres_tex.tex}
\caption{Przyk³adowy rysunek wykonany w~MATLABie i~wygenerowany skryptem \texttt{matlab2tikz}}
\label{r_matlab2tikz}
\end{figure}

Pomimo tego, ¿e w~MATLAB-ie znakiem oddzielaj¹cym czêœæ ca³kowit¹ od czêœci u³amkowej jest kropka, to w~sprawozdaniu zast¹piona ona zosta³a przecinkiem. Jest to wynikiem dzia³ania jednej z linijek znajduj¹cych siê w~preambule, które na sta³e konfiguruj¹ pakiet PGFPlots tak, aby zawsze liczby formatowa³ zgodnie z polskimi standardami.

Zwróæmy uwagê, ¿e rysunek zapisany w~pliku Ÿród³owym plik \verb+wykres_tex.tex+ jest generowany przy ka¿dym przetworzeniu dokumentu przez system \LaTeX. Aby przyspieszyæ dzia³anie systemu, warto osobno wygenerowaæ wszystkie rysunki, a~nastêpnie wstawiæ do dokumentu gotowe pliki \verb+pdf+. S³u¿y do tego plik \verb+wykres_tex_standalone.tex+, umo¿liwiaj¹cy zapisanie rysunku do pliku \verb+wykres_tex_standalone.pdf+. Znajduje siê on w~katalogu \verb+rysunki/matlab2tikz+ i~ma nastêpuj¹c¹ postaæ:
\lstinputlisting[style=customlatex,frame=single]{rysunki/matlab2tikz/wykres_tex_standalone.tex}

W~celu efektywnej pracy ze skryptem \texttt{matlab2tikz} nale¿y przenieœæ wszystkie potrzebne pliki do katalogu, w~którym MATLAB poszukuje wywo³ywanych funkcji. W~tym celu nale¿y utworzyæ katalog \verb|<MATLAB_ROOT>/toolbox/matlab2tikz| (gdzie \verb|<MATLAB_ROOT>| jest œcie¿k¹ do katalogu gdzie zainstalowany jest MATLAB), skopiowaæ doñ zawartoœæ katalogu \verb|src|, a~nastêpnie dodaæ powy¿szy katalog do listy œcie¿ek MATLAB-a (np. klikaj¹c zak³adkê \verb|HOME| i~przycisk \verb|SetPath| w~MATLAB-ie).

\textbf{UWAGA:} MATLAB 2017b automatycznie dodaje do wykresów legendê (MATLAB 2017a tego nie robi). Dla zainteresowanych rozwi¹zaniem tego problemu, link\newline \url{https://github.com/matlab2tikz/matlab2tikz/issues/1006}

\subsection{MATLAB i~dobór kolorów}
Uwaga: nie stosujemy starej palety kolorów pakietu MATLAB, przedstawionej w~tab.~\ref{r_zestaw_kolorow_MATLAB_historia}.

\definecolor{staryniebieski}{rgb}{0,0,1}
\definecolor{staryczerwony}{rgb}{1,0,0}	
\definecolor{staryzolty}{rgb}{1,1,0}		
\definecolor{staryfioletowy}{rgb}{1,0,1}	
\definecolor{staryzielony}{rgb}{0,1,0}
\definecolor{staryjasnoniebieski}{rgb}{0,1,1}
\definecolor{czarny}{rgb}{0,0,0}

\begin{table}[H]
\caption{Stara paleta 7 kolorów pakietu MATLAB (nie u¿ywaæ)}
\label{r_zestaw_kolorow_MATLAB_historia}
	\centering
	\begin{small}
		\begin{tabular}{|p{3cm}|p{4cm}|}
			\hline
			%\multicolumn{1}{|c|}{Nazwa koloru\rule{0pt}{3.5mm}} & \multicolumn{1}{|c|}{} \\ \hline
			'r' & \cellcolor{staryczerwony}\\
			'g' & \cellcolor{staryzielony}\\
			'b' & \cellcolor{staryniebieski}\\
			'c' & \cellcolor{staryjasnoniebieski}\\
			'm' & \cellcolor{staryfioletowy}\\
			'y' & \cellcolor{staryzolty}\\
			'k' & \cellcolor{czarny}\\
			\hline
		\end{tabular}
	\end{small}
\end{table}

Aktualne wersje pakietu MATLAB automatycznie stosuj¹ kolejne kolory dla kolejnych poleceñ \verb+plot+ lub \verb+stairs+ z~palety \texttt{lines}, przedstawione w~tab. \ref{r_zestaw_kolorow}. Nie musimy stosowaæ ¿adnych identyfikatorów kolorów. Co wa¿ne, nie stosujemy identyfikatorów kolorów postaci \verb+'r'+, \verb+'g'+, \verb+'b'+, \verb+'c'+, \verb+'m'+, \verb+'y'+, \verb+'k'+. Rozwa¿my plik \verb+kolory_matlab.m+ z~katalogu \verb+rysunki/matlab2tikz+:
\lstinputlisting[style=Matlab-editor]{./rysunki/matlab2tikz/kolory_matlab.m}
Powy¿szy skrypt generuje dwa rysunki, przy czym na pierwszym z~nich kolejne kolory s¹ dobierane automatycznie, co osi¹gamy nie definiuj¹c ¿adnych identyfikatorów kolorów, na drugim rysunku u¿ywamy historycznej palety kolorów. Otrzymane rezultaty zamieszczono na rys. \ref{r_wykres_kolory1} i~rys. \ref{r_wykres_kolory2}. Kolory z~historycznej palety s¹ zbyt jaskrawe, szczególnie zielony i~¿ó³ty. Reasumuj¹c, stosujemy automatyczny przydzia³ kolorów (paleta \texttt{lines}).

\begin{figure}[H]
\centering
	\input{./rysunki/matlab2tikz/wykres_kolory1.tex}
\caption{Przyk³adowy rysunek wykonany w~MATLABie i~wygenerowany skryptem \texttt{matlab2tikz}: prawid³owy dobór kolorów}
\label{r_wykres_kolory1}
\end{figure}

\begin{figure}[H]
\centering
	\input{./rysunki/matlab2tikz/wykres_kolory2.tex}
\caption{Przyk³adowy rysunek wykonany w~MATLABie i~wygenerowany skryptem \texttt{matlab2tikz}: nieprawid³owy dobór kolorów}
\label{r_wykres_kolory2}
\end{figure}

\section{Lokalizacja rysunków i~tabel}
Zgodnie z~filozofia systemu \LaTeX, wszystkie rysunki i~tabele powinniœmy umieszczaæ jako ,,p³ywaj¹ce", a~wiêc w otoczeniu \verb+figure+ oraz \verb+table+, mo¿liwe pozycje: \verb+[t]+ -- na górze strony, \verb+[b]+ -- na dole strony, \verb+[p]+ -- na stronie rysunków/tabel (mo¿liwe s¹ równie¿ kombinacje tych opcji). Mo¿na równie¿ zastosowaæ opcjê \verb+[h]+ (je¿eli siê da, to w~tym miejscu). Wymienione opcje dzia³aj¹ dobrze, pod warunkiem jednak, ¿e w~dokumencie znajduje siê ,,odpowiednia'' iloœæ tekstu, wystarczaj¹ca do ³adnego u³o¿enia razem z~rysunkami i~tabelami. Niestety, je¿eli rysunków i~tabel jest znacznie wiêcej ni¿ tekstu, mog¹ siê znajdowaæ daleko od miejsca, w~którym s¹ omawiane. Nale¿y wówczas zastosowaæ opcjê \verb+[H]+ z~pakietu \verb+float+ (dok³adnie w~tym miejscu). Wad¹ takiego rozwi¹zania jest prawdopodobieñstwo wyst¹pienia pustych fragmentów stron, ale rysunki i~tabele s¹ dok³adnie w~tym miejscu, w~którym wska¿emy. Aby unikn¹æ umieszczenia rysunków w~tekœcie kolejnego rozdzia³u mo¿na równie¿ zastosowaæ polecenie \verb+\FloatBarrier+ z~pakietu \verb+placeins+.


